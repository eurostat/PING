Creation of documentation using gh-pages
========================================

The objective is to create a documentation under the same project as the original code, 
but with a different versioning "repository", since we want, somehow, to update it 
separately. We use gh-pages for that purpose. See references below. 

## Creation/usage:

### Initial configuration of the source code repository

You need to configure your git:

	git config --global user.name "<user-name>" 
	git config --global user.email "<user-email>" 
	git config --global http.proxy http://<personal-login>:<internet-password>@147.67.117.13:8012
Add the remote PING repository on Github:
	
	cd /z/PING/
	git remote add origin https://github.com/eurostat/PING.git

### Configuration of the documentation repository

Start: the documentation is exluded from the general versioning system (e.g. .git of the
root folder PING/):

	echo "docs/html/" >> .gitignore
	git add .
	git commit -m "added html documentation docs/html folder to .gitignore"
	git push origin master
Create a specific git environment for the documentation:	

	cd docs/html
	git clone https://github.com/eurostat/PING.git .
	git fetch origin
	
Assuming a gh-pages branch has been created: 
	
	git branch gh-pages origin/gh-pages
	git checkout origin/gh-pages -b gh-pages
	git branch -d master
	
	git rm -fr *
	git commit -m "removed everything from gh-pages branch"
	
	cp -r /z/PING/docs/html/* .
	git checkout gh-pages
	git add *
	git commit -m "added initial html documentation"
	git push origin gh-pages
 
### Usage
 
Operations above shall be used, then:
	
	<do whatever>
	git add <whatever_you_modified>
	git commit -m "add whatever comment"
	git push origin gh-pages
 
### Resources online 
* http://rickfoosusa.blogspot.be/2011/10/howto-use-doxygen-with-github.html
* https://gist.github.com/chrisjacob/833223
* http://stackoverflow.com/questions/8446218/how-to-see-an-html-page-on-github-as-a-normal-rendered-html-page-to-see-preview  
* https://github.com/m-a-d-n-e-s-s/madness/issues/104 

### Note
We use the GIT bash terminal supported by DIGIT to run the operations above.

## Issues 

### 1. issue with publication of pages starting with "_"
 
*Files that start with an underscore are missing*: by default, [Jekyll](https://jekyllrb.com/docs/configuration/) 
does not build any files or directories that are hidden or used for backup (indicated by names that start with . 
or #, or that end with ~); contain site content (indicated by names that start with _); or are excluded in the 
site configuration.

To work around (bypass) this behavior, there are 3 solutions:
* *include a .nojekyll file in the root path to turn off Jekyll;*
* use the include directive in your _config.yml to specify files that should not be ignored; or
* do not use file or directory names that start with an underscore (_), period (.), or hash symbol 
(#), or that end with a tilde (~).

We chose the 1st one.
	
See for instance: 
* https://help.github.com/articles/files-that-start-with-an-underscore-are-missing/
* http://stackoverflow.com/questions/34185609/github-pages-github-io-doxygen-generated-page-not-found-404
* https://github.com/blog/572-bypassing-jekyll-on-github-pages

### 2. issue with images

Original images are stored under /z/PING/docs/img. Through gh-pages, those cannot be accessed. 
As a consequence, it is necessary to copy the contents of this folder into the output html folder generated by doxygen, 
e.g., /z/PING/docs/html.
Links to images are manually set (regular html links) in the documentation (see for instance the documentation of the
macro /z/PING/7.4_Services/pgm/arope_press_news.sas).

### 3. fork me
The following `html` instructions is added to the `index.html` source documentation inside the `<tbody><\tbody>` declaration so as to provide with a link to the source code from the documentation page:

  <td id="forkme">
  <a href="https://github.com/gjacopo/PING"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
   </td>

 
