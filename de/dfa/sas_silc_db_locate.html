<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PING: SAS silc_db_locate</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../ping_bw.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PING
   &#160;<span id="projectnumber">0.9</span>
   </div>
   <div id="projectbrief">Statistical data handling and processing in production environment</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('de/dfa/sas_silc_db_locate.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SAS silc_db_locate </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="fragment"><div class="line">%silc_db_locate(survey, time, geo=, db=, src=, </div><div class="line">                _ftyp_=, _ds_=, _path_=, </div><div class="line">                cds_transxyear=META_TRANSMISSIONxYEAR, clib=LIBCFG);</div></div><!-- fragment --><h3>Arguments</h3>
<ul>
<li><code>survey</code> : type of the survey; this is represented by any of the character values defined in the global variable <code>G_PING_SURVEYTYPES</code>, <em>i.e.</em> as:<ul>
<li><code>X</code>. <code>C</code> or <code>CROSS</code> for a cross-sectional survey,</li>
<li><code>L</code> or <code>LONG</code> for a longitudinal survey,</li>
<li><code>E</code> or <code>EARLY</code> for an early survey,</li>
</ul>
</li>
<li><code>time</code> : a single selected year of interest;</li>
<li><code>geo</code> : (<em>option</em>) string(s) representing the ISO-code(s) of (a) country(ies); note that when <code>geo</code> is not passed and <code>&amp;src=raw</code> (see below), the output parameters <code>_path_</code> and <code>_ds_</code> cannot be defined: only <code>_ftyp_</code> can be returned (see below); in all other cases, <code>geo</code> is ignored;</li>
<li><p class="startli"><code>db</code> : (<em>option</em>) database(s) to retrieve; it can be any of the character values defined through the global variable <code>G_PING_BASETYPES</code>, <em>i.e.</em>:</p><ul>
<li><code>D</code> for household register/D file,</li>
<li><code>H</code> for household/H file,</li>
<li><code>P</code> for personal register/P file,</li>
<li><code>R</code> for register/R file,</li>
</ul>
<p class="startli">so as to represent the corresponding bulk databases (files); by default,<code>db=&amp;G_PING_BASETYPES</code>;</p>
</li>
<li><p class="startli"><code>src</code> : (<em>option</em>) string defining the source location where to look for bulk database; this can be either the full path of the directory where to search in, or any of the following strings:</p><ul>
<li><code>raw</code> so that the path of the search directory is set to the value of <code>G_PING_RAWDB</code>,</li>
<li><code>bdb</code>, ibid with the value of <code>G_PING_BDB</code>,</li>
<li><code>pdb</code>, ibid with the value of <code>G_PING_PDB</code>,</li>
<li><code>idb</code>, ibid with the value of <code>G_PING_IDB</code>,</li>
<li><code>udb</code>, ibid with the value of <code>G_PING_UDB</code>;</li>
</ul>
<p class="startli">note that the latter four cases are independent of the parameter chosen for <code>geo</code>; note also that <code>src=bdb</code> and <code>src=idb</code> are incompatible with <code>survey&lt;&gt;X</code>; furthermore, when <code>src=idb</code>, the parameter <code>db</code> is ignored; by default, <code>src</code> is set to <code>&amp;G_PING_RAWDB</code> (<em>e.g.</em> <code>&amp;G_PING_ROOTPATH/main</code>) so as to look for raw data;</p>
</li>
<li><code>cds_transxyear, clib</code> : (<em>options</em>) configuration file storing the the yearly definition of microdata transmission files' format, and library where it is actually stored; for further description of the table, see <a class="el" href="../../d0/d46/meta_transmissionxyear.html">%meta_transmissionxyear</a>; this will be essentially used when <code>src=RAW</code>.</li>
</ul>
<h3>Returns</h3>
<ul>
<li><code>_ftyp_</code> : (<em>option</em>) longitudinal, cross-sectional or reconsilied/regular</li>
<li><p class="startli"><code>_ds_</code> : (<em>option</em>) name(s) of the bulk dataset(s) extracted from the databases in <code>db</code>; in practice, all bulk datasets (files) have generic name of the form:</p><ul>
<li><code>&amp;ts.&amp;yy.&amp;db</code> when <code>src</code> is in (<code>pdb</code>,<code>udb</code>),</li>
<li><code>bdb_&amp;ts.&amp;yy.&amp;db</code> when <code>src=bdb</code> (<code>bdb_c</code> available only),</li>
<li><code>idb.&amp;yy</code> when <code>src=idb</code>,</li>
<li><code>&amp;ts.&amp;geo.&amp;yy.&amp;db</code> when <code>src=bdb</code>,</li>
</ul>
<p class="startli">where:</p><ul>
<li><code>ts</code> is the type of the tranmission file whose definition depends on <code>survey</code> (<em>i.e.</em> either <code>C, L, E</code>, or <code>R</code>),</li>
<li><code>db</code> is any element of <code>db</code> (<em>i.e.</em> either <code>D, H, P</code>, or <code>R</code>),</li>
<li><code>geo</code> is any ISO-code represented in <code>geo</code>,</li>
<li><code>yy</code> is composed of the last two digits of a<code>time</code> (<em>i.e.</em> if <code>time=2014</code>, then <code>yy=14</code>)</li>
</ul>
<p class="startli">and are retrieved from the database library associated to <code>src</code>;</p>
</li>
<li><code>_path_</code> : (<em>option</em>) path to longitudinal, cross-sectional or reconsilied/regular database(s), set depending on <code>src</code>.</li>
</ul>
<h3>Examples</h3>
<p>Let us consider the following simple example:</p>
<div class="fragment"><div class="line">%let ftyp=;</div><div class="line">%silc_db_locate(X, 2014, _ftyp_=ftyp);</div></div><!-- fragment --><p> will return <code>ftyp=r</code> because cross-sectional data are normally transmitted via regular (R) files since 2014. We can further retrieve the location of the corresponding <code>H</code> file:</p>
<div class="fragment"><div class="line">%let ds=;</div><div class="line">%let path=;</div><div class="line">%silc_db_locate(X, 2014, geo=AT, db=H, _ds_=ds, _path_=path);</div></div><!-- fragment --><p> will set <code>path=/ec/prod/server/sas/0eusilc/main/at/r14</code> and <code>ds=rat14h</code>, while</p>
<div class="fragment"><div class="line">%let ds=;</div><div class="line">%let path=;</div><div class="line">%silc_db_locate(X, 2014, geo=AT DE, db=H, _ds_=ds, _path_=path);</div></div><!-- fragment --><p> will set <code>path=/ec/prod/server/sas/0eusilc/main/at/r14 /ec/prod/server/sas/0eusilc/main/de/c14</code> and <code>ds=rat14h cde14h</code>. It is then possible to reconstruct the full paths:</p>
<div class="fragment"><div class="line">%let file=%list_append(&amp;path, &amp;ds, zip=%quote(/), rep=%quote( ));</div><div class="line">%let file=%list_append(&amp;file, %list_ones(%list_length(&amp;file), item=sas7bdat), zip=%quote(.));</div></div><!-- fragment --><p> sets <code>file=/ec/prod/server/sas/0eusilc/main/at/r14/rat14h.sas7bdat /ec/prod/server/sas/0eusilc/main/de/c14/cde14h.sas7bdat</code>. Finally:</p>
<div class="fragment"><div class="line">%let ftyp=;</div><div class="line">%let ds=;</div><div class="line">%let path=;</div><div class="line">%silc_db_locate(X, 2014, geo=AT DE, db=R H, _ftyp_=ftyp, _ds_=ds, _path_=path);</div></div><!-- fragment --><p> sets <code>ftyp=r c</code>, <code>path=/ec/prod/server/sas/0eusilc/main/at/r14 /ec/prod/server/sas/0eusilc/main/at/r14 /ec/prod/server/sas/0eusilc/main/de/c14 /ec/prod/server/sas/0eusilc/main/de/c14</code> and <code>ds=rat14r rat14h cde14r cde14h</code>.</p>
<p>Run <code>%_example_silc_db_locate</code> for more examples.</p>
<h3>Notes</h3>
<ol type="1">
<li>The existence of returned path (in <code>_path_</code>) and dataset (in <code>_ds_</code>) is not verified.</li>
<li>In order to retrieve the type of the transmission file (returned through <code>_ftyp_</code>), this macro runs in practice:</li>
</ol>
<div class="fragment"><div class="line">PROC SQL noprint;</div><div class="line">    SELECT Y&amp;time</div><div class="line">    INTO :&amp;_ftyp_</div><div class="line">    %if %list_length(&amp;geo)&gt;0 %then %do;</div><div class="line">        SEPARATED BY &quot; &quot;</div><div class="line">    %end;</div><div class="line">    FROM &amp;clib..&amp;cds_transxyear</div><div class="line">    WHERE transmission=&quot;%upcase(&amp;survey)&quot; and</div><div class="line">    %if %list_length(&amp;geo)&gt;0 and &amp;src=raw %then %do;</div><div class="line">        geo in (%list_quote(&amp;geo))</div><div class="line">    %end;</div><div class="line">    %else %do;</div><div class="line">        missing(geo)</div><div class="line">    %end;</div><div class="line">    ;</div><div class="line">quit;</div></div><!-- fragment --><p> Following, to retrieve the common type <code>ftyp</code> of transmission files for a given year <code>time</code> and a survey of type <code>survey</code>, simply run:</p>
<div class="fragment"><div class="line">%let ftyp=;</div><div class="line">%silc_db_locate(&amp;survey, &amp;time, _ftyp_=ftyp);</div></div><!-- fragment --><ol type="1">
<li>Note that from the output path and dataset, you can easily reconstruct the full path(s) (directory name + dataset name + extension) of the original SAS files, <em>e.g.</em> for given <code>survey, db, time</code> and <code>geo</code>:</li>
</ol>
<div class="fragment"><div class="line">%let ds=;</div><div class="line">%let path=;</div><div class="line">%silc_db_locate(survey, db, time, geo=geo, _ds_=ds, _path_=path);</div><div class="line">%let fullpath=%list_append(&amp;path, &amp;ds, zip=%quote(/), rep=%quote( ));</div><div class="line">%let fullpath=%list_append(&amp;fullpath, %list_ones(%list_length(&amp;fullpath), item=sas7bdat), </div><div class="line">                              zip=%quote(.), rep=%quote( - ));</div></div><!-- fragment --><h3>See also</h3>
<p><a class="el" href="../../d3/d36/stata_silc_db_locate.html">silc_db_locate (Stata)</a>, <a class="el" href="../../d1/db0/sas_silc_ds_extract.html">%silc_ds_extract</a>, <a class="el" href="../../d0/d46/meta_transmissionxyear.html">%meta_transmissionxyear</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d6/da4/_integration.html">5.1 Integration</a></li><li class="navelem"><a class="el" href="../../dd/d51/silc_db_locate.html">silc_db_locate</a></li>
    <li class="footer">Generated on Fri Jan 12 2018 18:46:03 for PING by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
