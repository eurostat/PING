<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PING: ds_sample</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../ping_bw.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PING
   &#160;<span id="projectnumber">0.9</span>
   </div>
   <div id="projectbrief">Statistical data handling and processing in production environment</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('da/de4/sas_ds_sample.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ds_sample </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Perform the sampling of a given dataset following <code>PROC SURVEYSELECT</code> method.</p>
<div class="fragment"><div class="line">%ds_sample(idsn, odsn, sampsize=1, method=SRS, nreps=1, var=, seed=, strata= , ilib=WORK, olib=WORK, debug=no);</div></div><!-- fragment --><h3>Arguments</h3>
<ul>
<li><code>idsn</code> : a dataset;</li>
<li><code>sampsize, method, nreps, seed, strata</code> : (<em>option</em>) arguments of the <code>PROC SURVEYSELECT</code>; default: 1, SRS (<em>i.e.</em> simple random sampling), 1 (no repetition), '' (not specified/used) and '' respectively;</li>
<li><code>var</code> : (<em>option</em>) list of (unquoted and blank-separated) strings that store the name of the variables/fields (which must exist in the dataset) to be returned in <code>odsn</code>;</li>
<li><code>ilib</code> : (<em>option</em>) name of the input library; by default: empty, <em>i.e.</em> <code>WORK</code> is used.</li>
</ul>
<h3>Returns</h3>
<ul>
<li><code>odsn</code> : name of the output table where the sampled data (of size <code>sampsize</code>, see above) will be stored;</li>
<li><code>olib</code> : (<em>option</em>) name of the output library; by default: empty, and the value of <code>ilib</code> is used.</li>
</ul>
<h3>Example</h3>
<p>Let us consider the table <code>_dstest31</code> as follows: </p><table class="doxtable">
<tr>
<th>geo </th><th>value </th><th>unit  </th></tr>
<tr>
<td>BE </td><td>0 </td><td>EUR </td></tr>
<tr>
<td>AT </td><td>0.1 </td><td>EUR </td></tr>
<tr>
<td>BG </td><td>0.2 </td><td>NAC </td></tr>
<tr>
<td>LU </td><td>0.3 </td><td>EUR </td></tr>
<tr>
<td>FR </td><td>0.4 </td><td>NAC </td></tr>
<tr>
<td>IT </td><td>0.5 </td><td>EUR </td></tr>
</table>
<p>we then shall run the sampling of <code>geo</code> and <code>value</code> fields only:</p>
<div class="fragment"><div class="line">%ds_sample(_dstest31, dsn, sampsize=2, var=geo unit, method=SRS, nreps=1);</div></div><!-- fragment --><p> which returns (<code>seed</code> not set) into the dataset <code>dsn</code> the following table: </p><table class="doxtable">
<tr>
<th>geo </th><th>unit  </th></tr>
<tr>
<td>BG </td><td>NAC </td></tr>
<tr>
<td>FR </td><td>NAC </td></tr>
</table>
<p>Run macro <code>%_example_ds_sample</code> for more examples.</p>
<h3>Notes</h3>
<ol type="1">
<li>In short, this macro runs, in case <code>strata</code> is not passed:</li>
</ol>
<div class="fragment"><div class="line">PROC SURVEYSELECT DATA=&amp;ilib..&amp;dsn OUT=&amp;olib..&amp;odsn </div><div class="line">    METHOD = &amp;method REPS = &amp;nreps </div><div class="line">    SAMPSIZE = &amp;sampsize</div><div class="line">    SEED = &amp;seed</div><div class="line">    ID &amp;var;</div><div class="line">run;</div></div><!-- fragment --><p> or in case <code>strata</code> is specified:</p>
<div class="fragment"><div class="line">PROC SURVEYSELECT DATA=&amp;ilib..&amp;dsn OUT=&amp;olib..&amp;odsn </div><div class="line">    METHOD = &amp;method REPS = &amp;nreps </div><div class="line">    SAMPSIZE = &amp;sampsize</div><div class="line">    SEED = &amp;seed</div><div class="line">    ID &amp;var;</div><div class="line">STRATA &amp;strata ;</div><div class="line">run;</div></div><!-- fragment --><p>with the parameters defined above. Check the <a href="https://support.sas.com/documentation/cdl/en/statugsurveyselect/61839/PDF/default/statugsurveyselect.pdf">online documentation</a> of the <code>PROC SURVEYSELECT</code> procedure for more details.</p><ol type="1">
<li>No consideration on the <code>SIZE</code> (sampling unit size measure) statement is made, which implicitly means that you cannot perform unequal probability sampling with this macro.</li>
<li>For SRS and URS methods (simple sampling with or without replacement), an alternative algorithm is available so as to produce the same output whatever the machine used (see note 4 below). These algorithms have been implemented by P.BBES.Lamarche (<a href="#" onclick="location.href='mai'+'lto:'+'pie'+'rr'+'e.l'+'am'+'arc'+'he'+'@ec'+'.e'+'uro'+'pa'+'.eu'; return false;">pierr<span style="display: none;">.nosp@m.</span>e.la<span style="display: none;">.nosp@m.</span>march<span style="display: none;">.nosp@m.</span>e@ec<span style="display: none;">.nosp@m.</span>.euro<span style="display: none;">.nosp@m.</span>pa.e<span style="display: none;">.nosp@m.</span>u</a>).</li>
<li>This macro runs on different machine, but with the same seed on the same dataset will produce the exact same samples. Please note however that the current version of SAS (9.2 TS Level 2M3) on Solaris machines does not ensure the same output as SAS installed on a Windows machine for the <code>PROC SURVEYSELECT</code>. Therefore alternative macros have been implemented for SRS and URS methods; the SYS method should also be implemented in a later version.</li>
</ol>
<h3>Reference</h3>
<p>Fan, C.T., Muller, M.E., and Rezucha, I. (1962): <a href="http://www.jstor.org/stable/2281647">"Development of sampling plans by using eequential (item by item) selection techniques and digital computers"</a>, JASAS, 57(298):387-402, DOI: 10.2307/2281647.</p>
<h3>See also</h3>
<p><a class="el" href="../../d3/d64/sas_var_check.html">%var_check</a>, <a class="el" href="../../d4/ddc/sas_ds_count.html">%ds_count</a>, <a class="el" href="../../de/dea/sas_ds_delete.html">%ds_delete</a>, <a href="https://support.sas.com/documentation/cdl/en/statug/63033/HTML/default/viewer.htm#surveyselect_toc.htm">SURVEYSELECT</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d4/d6f/library_dataset.html">Dataset manipulation</a></li>
    <li class="footer">Generated on Fri Jan 12 2018 11:50:17 for PING by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
