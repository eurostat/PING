<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PING: diagram_venn</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../ping_bw.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PING
   &#160;<span id="projectnumber">0.9</span>
   </div>
   <div id="projectbrief">Statistical data handling and processing in production environment</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('da/df9/sas_diagram_venn.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">diagram_venn </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Plot 3-way Venn diagrams (using <code>PROC GMAP</code>) with values displayed in each set and/or set intersections.</p>
<div class="fragment"><div class="line">%diagram_venn(idsn, var=, valpct=, valnum=, valid=, format=, label=, ofn=, odir=, ilib=,</div><div class="line">              hover=, title=, fontSize=4, labelFontSize=4, imgFmt=gif, valColor=white, bgColor=white);;</div></div><!-- fragment --><h3>Arguments</h3>
<ul>
<li><code>idsn</code> : name of the input dataset containing 3 set indicator variables along with a 4th variable (either a cell count, an id variable or a variable direclty containing the information to be displayed in each set or set intersections); see example below;</li>
<li><code>var</code> : (<em>option</em>) lists of set indicator variables, 3 in total; each of these variables is binary, taking value 1 for values in corresponding set, 0 for values outside of the corresponding set; when not passed, the 3 first variables of <code>idsn</code> dataset are retrieved (<em>i.e.</em>, by <code>varnum</code> order) assuming they are correctly formatted;</li>
<li><code>valpct</code> : (<em>option</em>) if <code>idsn</code> consists of 3 set indicator variables and a variable (which could be a text variable) to be displayed on the plot, specify the corresponding variable name throught the <code>valpct</code> argument; this option is incompatible with options <code>valnum</code> and <code>valid</code> below;</li>
<li><code>valnum</code> : (<em>option</em>) if <code>idsn</code> already consists of cell counts to be displayed on the plot, then the variable where these cell counts can be found must be specified through the <code>valnum</code> argument; this option is incompatible with options <code>valpct</code> above and <code>valid</code> below;</li>
<li><code>valid</code> : (<em>option</em>) if <code>idsn</code> consists of a series of observations (patients) with an ID variable and 3 set indicator variables, then the ID variable should be specified through the <code>valid</code> argument; this option is incompatible with options <code>valpct</code> and <code>valnum</code> above;</li>
<li><code>format</code> : (<em>option</em>) SAS format in which values printed in each set should be displayed; default is <code>percent8.1</code> when <code>valpct</code> is set, <code>8.1</code> otherwise;</li>
<li><code>ofn</code> : (<em>option</em>) name of the <code>.html</code> output file to be saved; an image will also be saved with the same name, with file extension as defined by <code>imgFmt</code> (see below); by default, no file is saved;</li>
<li><code>odir</code> : (<em>option</em>) path of the directory where output <code>.html</code> file and image (with generic name <code>ofn</code>) shall be saved; obviously ignored when <code>ofn</code> is not passed;</li>
<li><code>title</code> : (<em>option</em>) title to be displayed on top of the plot; default is "Venn Diagram - &lt;idsn&gt;", where &lt;idsn&gt; stands for the name of the input dataset <code>idsn</code>;</li>
<li><code>label</code> : (<em>option</em>) labels (3 in total) to be printed next to each set; default is to use each set indicator variable names available through <code>var</code>;</li>
<li><code>hover</code> : (<em>option</em>) formatted list of quoted items which contain text to be displayed when hovering over each set or set intersections with the mouse; the order of display in <code>hover</code> is given by the sequence: <code>1 2 3 12 23 13 123</code> where the number indicates the order of the variables in <code>var</code> which is concerned by the set or set intersection; in particular, <code>hover</code> must be of length 7 (number of sets in the Venn diagram); by default, <code>hover</code> is the concatenation of the corresponding set label(s);</li>
<li><code>fontSize</code> : (<em>option</em>) font size for values to be displayed in each set or set intersections; default: 4;</li>
<li><code>labelFontSize</code> : (<em>option</em>) font size for set labels; default: 4;</li>
<li><code>imgFmt</code> : (<em>option</em>)image format; default: <code>imgFmt=gif</code>; an alternative is <code>png</code>;</li>
<li><code>valColor</code> : (<em>option</em>)color of values displayed in sets; default: <code>valColor=white</code>.</li>
<li><code>bgColor</code> : (<em>option</em>)background color; default: <code>bgColor=white</code>;</li>
<li><code>ilib</code> : (<em>option</em>) name of the input library; by default: empty, <em>i.e.</em> <code>WORK</code> is used.</li>
</ul>
<h3>Example</h3>
<p>We provide here an example presented in the original code (see note below).</p>
<p>Given the table <code>Example</code> in <code>WORK</code>ing library:</p>
<div class="fragment"><div class="line">DATA Example;</div><div class="line">    input Scholars Students Athletes p;</div><div class="line">cards;</div><div class="line">1 0 0 0.07</div><div class="line">0 1 0 0.23</div><div class="line">0 0 1 0.12</div><div class="line">1 1 0 0.03</div><div class="line">0 1 1 0.08</div><div class="line">1 0 1 0.04</div><div class="line">1 1 1 0.02</div><div class="line">;</div><div class="line">run;</div></div><!-- fragment --><p>then running: </p><pre class="fragment">%diagram_venn(Example, var=Scholars Students Athletes, valpct=p, format=percent8.1);
</pre><p>will produce the following graphical result:</p>
<div class="image">
<img src="../../img/diagram_venn.png" border="1" width="50%" alt="Venn diagram"/>
</div>
<p>Run macro <code>%_example_diagram_venn</code> for examples.</p>
<h3>Notes</h3>
<ol type="1">
<li><b>The macro <code>%diagram_venn</code> is a wrapper to L. Joseph's original <code>%VennDiagram</code> macro which implements a 3-Way non-proportional Venn diagram</b>. Original source code (no license, no disclaimer) is available at <a href="http://www.medicine.mcgill.ca/epidemiology/joseph/pbelisle/VennDiagram.html">http://www.medicine.mcgill.ca/epidemiology/joseph/pbelisle/VennDiagram.html</a>.</li>
<li>This macro creates Venn diagram using SAS/Graph <code>PROC GMAP</code> where each segment of the Venn diagram is a totally separate map area, so the color/drilldown/etc of each piece can be controlled separately.</li>
</ol>
<h3>References</h3>
<ol type="1">
<li>Allison R. <a href="http://robslink.com/SAS/democd14/aaaindex.htm">webpage</a> on SAS/Graph samples from which the code is derived.</li>
<li>Harris, K. (2008): <a href="http://www2.sas.com/proceedings/forum2008/073-2008.pdf">"How to generate 2, 3 and 4 way Venn diagrams with drill down functionality within 4 minutes!"</a>.</li>
<li>Li, S. (2009): <a href="http://www.lexjansen.com/nesug/nesug09/ap/AP11.pdf">"Customized proportional Venn diagrams from SAS system"</a>.</li>
<li>Kruger, H. (2011): ["Creating proportional Venn diagrams using Google and SAS"](Creating proportional Venn diagrams using Google and SAS).</li>
<li>Harris, K. (2008): <a href="http://support.sas.com/resources/papers/proceedings13/243-2013.pdf">"V is for Venn diagrams"</a>.</li>
</ol>
<h3>See also</h3>
<p><a href="http://robslink.com/SAS/democd14/venn.sas">venn</a>, <a href="http://robslink.com/SAS/democd14/vennmap.sas">vennmap</a>, <a href="http://www.medicine.mcgill.ca/epidemiology/joseph/pbelisle/VennDiagram.html">VennDiagram</a>, <a href="http://support.sas.com/documentation/cdl/en/graphref/67881/HTML/default/viewer.htm#n01e0bon6tv6ncn1a7dlrr5fh5tr.htm">PROC GMAP</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/dcd/_visualisation.html">7.4 Visualisation</a></li>
    <li class="footer">Generated on Fri Jan 12 2018 09:15:51 for PING by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
