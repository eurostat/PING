<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PING: Documenting</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../ping_bw.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PING
   &#160;<span id="projectnumber">0.9</span>
   </div>
   <div id="projectbrief">Statistical data handling and processing in production environment</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('da/dca/mainpage_documenting.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Documenting </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The purpose of an adequate documentation is to enable the produser to (re)use, extend, share and migrate a program. It is also essential for business and processes modeling.</p>
<p>For that purpose, we adopt a standardised way for appropriately document <code>PING</code> programs and processes. In practice, an "inline" documentation:</p><ul>
<li>adopts <a href="https://daringfireball.net/projects/markdown/">markdown</a> language,</li>
<li>is systematically inserted as comments directly inside the programs, in the header,</li>
</ul>
<p>and is then automatically extracted so as to create a user-friendly browsable "online" documentation using <a href="http://www.stack.nl/~dimitri/doxygen/">doxygen</a> documentation generator.</p>
<p>We provide hereby guidelines and templates for actually documenting:</p><ul>
<li><a class="el" href="../../da/dca/mainpage_documenting.html#SASdoc">SAS programs</a> (<em>e.g.</em> macros), and</li>
<li><a class="el" href="../../da/dca/mainpage_documenting.html#Rdoc">R programs</a> (<em>e.g.</em> functions),</li>
</ul>
<p>and we indicate as well how to automatically <a class="el" href="../../da/dca/mainpage_documenting.html#htmldoc">generate the documentation</a>.</p>
<p><a class="anchor" id="SASdoc"></a> </p>
<h3>Document SAS programs</h3>
<p>As mentioned above, the documentation of SAS programs is inserted in the header of the program as a comment. More precisely, we impose that:</p><ul>
<li><b>the documentation (markdown language) shall be inserted in between the symbols: <code>/**</code> and <code>*/</code></b>.</li>
</ul>
<p>Further, we also require that:</p><ul>
<li><b>the core program (SAS code) shall be inserted in between the following anchor marks: <code>/**</code> \cond <code>*/</code> and <code>/**</code> \endcond <code>*/</code></b>.</li>
</ul>
<p>You will also need to adopt a common template for documentation:</p><ul>
<li>the reference used for a program/macro is defined as the <b>name of the program to which the prefix string <code>sas_</code></b></li>
<li>arguments of a macro shall be listed under the header <code>### Arguments</code>,</li>
<li>outputs shall shall be listed under the header <code>### Returns</code>,</li>
<li>example(s) shall appear after the header <code>### Example</code> (<code>### Examples</code>);</li>
<li>indented code blocks can be inserted but fenced code blocks are preferred; they are defined using the syntax established in markdown, using 3 hyphens or tilde concatenated with <code>sas</code> shortname, hence <code>---sas</code> or <code>~~~sas</code> (both, in principle, supported for (pygmentation](<a href="http://pygments.org/docs/lexers/#lexer-for-sas">http://pygments.org/docs/lexers/#lexer-for-sas</a>),</li>
<li>note(s) shall appear after the header <code>### Note</code> (<code>### Notes</code>),</li>
<li>reference(s) related to the programs/macros shall be listed under <code>### Reference</code> (<code>### References</code>),</li>
<li>all other (<code>PING</code> or external) related programs/macros shall appear after the header <code>### See also</code>.</li>
</ul>
<p>The inline documentation of the <code>ds_create.sas</code> macro looks like, for instance:</p>
<pre class="fragment">## ds_create {#sas_ds_create}
Create (using a `PROC SQL`) a dataset/table from a common label template and a list of 
additional labels.

~~~sas
    %ds_create(dsn, var=, typ=, len=, cds_ind=, clib=, lib=WORK);
~~~

### Arguments
* `var` : (_option_) labels, i.e. names of the (additional) fields present in the dataset; 
    default: empty;
* `typ` : (_option_) types of the (additional) fields; must be the same length as `var`;
* `len` : (_option_) lengths of the (additional) fields; must be the same length as `var`; 
* `cds_ind` : (_option_) configuration file storing the template for indicator dimensions; 
    by default, it is named after the value `&amp;G_PING_INDICATOR_DIMENSIONS` (_e.g._, 
    `INDICATOR_DIMENSIONS`);
* `clib` : (_option_) name of the library where the configuration file is stored; default 
    to the value of `G_PING_LIBCFG`(_e.g._, `LIBCFG`) when not set;
* `lib` : (_option_) name of the output library where `dsn` shall be stored; by default: 
    empty, _i.e._ `WORK` is used.

### Returns
`dsn` : name of the final output dataset created. 

### Examples
Running for instance

~~~sas
    %let labels=A B C;
    %ds_create(dsn, var=&amp;labels, cds_ind=_NONE_, clib=_NONE_);
~~~
creates the table `dsn` as:
| A | B | C |
|---|---|---|
|   |   |   |  
where all fields `A, B, C` are of type `CHAR` and length `5.
Consider now the following table `TEMP` stored in `LIBCFG`:
LABEL | TYPE | LENGTH | ORDER
------|------|--------|------
    W | num  |      8 | 1
    X | num  |      8 | 2
    Y | char |     15 | 3
    Z | num  |      8 | -1
and run the command:

~~~sas
    %ds_create(dsn, var=&amp;labels, cds_ind=TEMP, clib=LIBCFG);
~~~
then the table `dsn` now looks like:
| W | X | Y | A | B | C | Z |
|---|---|---|---|---|---|---|
|   |   |   |   |   |   |   |
where the variables `W, X, Y, Z` types and lengths are taken from the `TEMP` table.

Run macro `%%_example_ds_create` for examples.

### See also
[%ds_check](@ref sas_ds_check), [%silcx_ind_create](@ref sas_silcx_ind_create).
</pre><p>so that the online documentation is rendered as: </p><div class="image">
<img src="../../img/doc_ds_create.png" border="1" width="85%" alt="documentation ds_create"/>
</div>
<p><a class="anchor" id="Rdoc"></a> </p>
<h3>Document R programs</h3>
<p>Similarly, the documentation shall be inserted in the header of the program as a comment, hence after the <code>#</code> symbol. In practice, <b>you will further need to insert the desired documentation in-between two anchors: <code>#STARTDOC</code> and <code>#ENDDOC</code></b> so as to recognise the text as specific to the documentation (and differentiate from other comments).</p>
<p>The common template for code documentation is exactly the same as the one used for SAS, with the following exceptions:</p><ul>
<li>the reference used for a program is defined as the <b>name of the program to which the prefix string <code>r_</code></b> is added (instead of <code>sas_</code> above),</li>
<li>all examples and <b>code excerpts shall be preceded with the <code>&gt;</code> symbol</b> (like in R console),</li>
<li>indented code blocks can be inserted but fenced code blocks are also preferred; they are defined 3 hyphens or tilde concatenated with <code>r</code> shortname, hence <code>---r</code> or <code>~~~r</code> (for (pygmentation](<a href="http://pygments.org/docs/lexers/#pygments.lexers.r.SLexer">http://pygments.org/docs/lexers/#pygments.lexers.r.SLexer</a>),</li>
</ul>
<p>As an example, the inline documentation inserted in the <code>data_extract.R</code> program looks like:</p>
<pre class="fragment">#STARTDOC
### data_extract {#r_data_extract}
#Extract data from pdb files.
#
#~~~r
#   &gt; data_extract(year, ctry, start_folder, out_format)
#~~~
#
#### Arguments 
#* `year` : the number of years after 2000;
#* `ctry` : a list of characters with the two letter country codes to extract;
#* `start_folder` : (_option_) a string with the path to the folder where the pdb files are, 
# if not provided the current working directory is used `(getwd())`; the folders should be 
# divided by the "/" character and should end with "/" character.;
#* `out_format` : (_option_) character `_c_`, `_l_`, or `_r_` what type of data shall be in 
# the output data frame; it takes the value `_r_` if it is missing.
#
#### Returns
# It provides a list of 4 data frames containing the data from the `d`, `h`, `p`, and `r` 
# SAS data files.
#
#### Examples
#
#~~~r
#    &gt; data_extract(14,c("AT","DE","EL"),"z:/pdb/","r")
#    &gt; data_extract(9,c("AT","DE","EL","CH","UK"),"y:/pdb/","c")
#~~~
#ENDDOC
</pre><p>and the online documentation is rendered as:</p>
<div class="image">
<img src="../../img/doc_data_extract.png" border="1" width="85%" alt="documentation data_extract"/>
</div>
<p><a class="anchor" id="htmldoc"></a> </p>
<h3>Generate the documentation</h3>
<p>So as to automatically generate the documentation (like this one), you will need:</p><ul>
<li>a script of extraction of the <code>markdown</code> formatted documentation from program files into pure <code>markdown</code> files,</li>
<li>a documentation generator that creates the user-friendly browsable documentation from the <code>markdown</code> files.</li>
</ul>
<p>As for the documentation extractor, you can use a bash script (hereby named <code>rsas2mddoc.sh</code>) specifically developed for this purpose. This ad-hoc program enables you to retrieve automatically the markdown formatted documentation inserted in R/SAS files (as described above), and store the resulting excerpts into separated files.</p>
<p>This script is located under the documentation folder <code>documentation\bin</code>. It works as an inline command: </p><div class="image">
<img src="../../img/rsas2mddoc.png" border="1" alt="use rsas2mddoc"/>
</div>
<p> that can be launched from any terminal so as to generate a bulk of <code>markdown</code> files (with <code>.md</code> extension) into the <code>documentation\md\library</code> folder. The associated help looks like the following: </p><div class="image">
<img src="../../img/rsas2mddoc_help.png" alt="help rsas2mddoc"/>
</div>
<p>The resuiting <code>markdown</code> files will look exactly like the headers in your programs with the exception of the <code>/*</code> (or <code>/**</code>) and <code>*/</code> anchors. Then, <a href="http://www.doxygen.org">doxygen</a> is the tool used to actually generate the documentation. The full set of guidelines/best practices for running this software is available in the <a href="http://www.stack.nl/~dimitri/doxygen/manual/starting.html">dedicated section</a> of the doxygen website. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">index</a></li>
    <li class="footer">Generated on Fri Jan 12 2018 11:50:15 for PING by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
