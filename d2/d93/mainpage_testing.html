<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PING: Testing</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../ping_bw.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PING
   &#160;<span id="projectnumber">0.9</span>
   </div>
   <div id="projectbrief">Statistical data handling and processing in production environment</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d2/d93/mainpage_testing.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Testing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h3>Implement test and describe examples</h3>
<p>Three types of tests are foreseen (see this <a href="http://www.phusewiki.org/wiki/index.php?title=SAS_macro_validation_criteria">wiki</a>):</p>
<ol type="1">
<li>Testing with known, provided data and known results, check for correct results (<em>white box testing</em>)</li>
<li>Testing with unknown data and unknown results, check for plausible results (<em>black box testing</em>)</li>
</ol>
<p>In general one should provide tests:</p><ul>
<li>with all variations of argument input parameters, so as to check their effects,</li>
<li>with existing but known erroneous data and argument parameters (fool proof testing)</li>
</ul>
<p>and also check for appropriate responses, error reports and their consistent layout and verify whether all parameters are being checked on validity (legal SAS names, limited options, numbers, etc.), verify checks on existence of specified dataset(s) and variables within dataset(s), also verify checks on non-existence of newly to create permanent dataset(s), and/or an indication that these may be overwritten if existing, verify possible cross checks between input parameters.</p>
<h4>White box testing</h4>
<p><b>Testing with known, provided data and known results, check for correct results.</b></p>
<p>Valid and appropriate, existing datasets should be used of which the contents are known. It should be clear what the result of the macro processing should be in terms of output datasets or output listings. These should be verified for correctness and possibly checked against other known correct results.</p>
<p>Currently, <em>white box testing</em> is applied in practice in <code>PING</code> through the implementation of "checked examples" within the distributed macros. Let us consider for instance the macro <a class="el" href="../../d7/d83/sas_ds_create.html">%ds_create</a> in SAS, the following macro is also provided in the core of the program:</p>
<div class="fragment"><div class="line">%macro _example_ds_create;</div><div class="line">    %if %symexist(G_PING_ROOTPATH) EQ 0 %then %do; </div><div class="line">        %if %symexist(G_PING_SETUPPATH) EQ 0 %then  %let G_PING_SETUPPATH=/ec/prod/server/sas/0eusilc; </div><div class="line">        %include &quot;&amp;G_PING_SETUPPATH/library/autoexec/_setup_.sas&quot;;</div><div class="line">        %_default_setup_;</div><div class="line">    %end;</div><div class="line"></div><div class="line">    %local _cds _dsn labels rlabels olabels types rtypes otypes lengths rlengths olengths;</div><div class="line">    %let _dsn=TMP&amp;sysmacroname;</div><div class="line">    %work_clean(&amp;_dsn);</div><div class="line"></div><div class="line">    %let labels=A B C;</div><div class="line">    %put;</div><div class="line">    %put (i) Create an ad-hoc table from parameter labels only; </div><div class="line">    %ds_create(&amp;_dsn, var=&amp;labels);</div><div class="line">    %let olabels=%sysfunc(compbl(   A   B   C   ));</div><div class="line">    %let otypes=%sysfunc(compbl(    2   2   2   ));</div><div class="line">    %let olenghts=%sysfunc(compbl(  15  15  15  ));</div><div class="line">    %ds_contents(&amp;_dsn, _varlst_=rlabels, _lenlst_=rlengths, _typlst_=rtypes, varnum=yes);</div><div class="line">    %if %quote(&amp;olabels)=%quote(&amp;rlabels) and %quote(&amp;olenghts)=%quote(&amp;rlengths) and %quote(&amp;otypes)=%quote(&amp;rtypes) %then     </div><div class="line">        %put OK: TEST PASSED - Dataset correctly created with (ordered and typed) fields: %upcase(&amp;olabels);</div><div class="line">    %else                   </div><div class="line">        %put ERROR: TEST FAILED - Wrong dataset creation with fields: &amp;rlabels;</div><div class="line">    %work_clean(&amp;_dsn);</div><div class="line"></div><div class="line">    %let _cds=cTMP&amp;sysmacroname;</div><div class="line">    %let types=char num char;</div><div class="line">    %let lengths=15 8 15;</div><div class="line">    DATA &amp;_cds;</div><div class="line">        LABEL=&quot;value&quot;;  TYPE=&quot;num &quot;;    LENGTH=8;   ORDER=-3; output;</div><div class="line">        LABEL=&quot;flag&quot;;   TYPE=&quot;char&quot;;    LENGTH=20;  ORDER=-2; output;</div><div class="line">        LABEL=&quot;n&quot;;      TYPE=&quot;num&quot;;     LENGTH=8;   ORDER=-1; output;</div><div class="line">        LABEL=&quot;geo&quot;;    TYPE=&quot;char&quot;;    LENGTH=15;  ORDER=1; output;</div><div class="line">        LABEL=&quot;time&quot;;   TYPE=&quot;num&quot;;     LENGTH=8;   ORDER=2; output;</div><div class="line">    run;</div><div class="line">    %put;</div><div class="line">    %put (ii) Create a dataset table from an ad-hoc configuration file;</div><div class="line">    %ds_create(&amp;_dsn, var=&amp;labels, len=&amp;lengths, typ=&amp;types, idsn=&amp;_cds, ilib=WORK);</div><div class="line">    %let olabels=%sysfunc(compbl(   geo time    A   B   C   value   flag    n   ));</div><div class="line">    %let otypes=%sysfunc(compbl(    2   1       2   1   2   1       2       1   ));</div><div class="line">    %let olenghts=%sysfunc(compbl(  15  8       15  8   15  8       20      8   ));</div><div class="line">    %ds_contents(&amp;_dsn, _varlst_=rlabels, _lenlst_=rlengths, _typlst_=rtypes, varnum=yes);</div><div class="line">    %if %quote(&amp;olabels)=%quote(&amp;rlabels) and %quote(&amp;olenghts)=%quote(&amp;rlengths) and %quote(&amp;otypes)=%quote(&amp;rtypes) %then     </div><div class="line">        %put OK: TEST PASSED - Dataset correctly created with (ordered and typed) fields: %upcase(&amp;olabels);</div><div class="line">    %else                   </div><div class="line">        %put ERROR: TEST FAILED - Wrong dataset creation with fields: &amp;rlabels;</div><div class="line">    %ds_print(&amp;_cds);</div><div class="line">    %ds_print(&amp;_dsn); /* empty.... */</div><div class="line"></div><div class="line">    %put;</div><div class="line">    %put (iii) Create a dataset table from the ad-hoc configuration file (default: INDICATOR_CONTENTS in LIBCFG);</div><div class="line">    %let labels=    AGE     SEX     HHTYP;</div><div class="line">    %let types=     char    char    char;</div><div class="line">    %let lengths=   15      15      15;</div><div class="line">    %ds_create(&amp;_dsn, var=&amp;labels, len=&amp;lengths, typ=&amp;types, idsn=INDICATOR_CONTENTS, ilib=LIBCFG);</div><div class="line">    %let olabels=%sysfunc(compbl(   geo time    AGE SEX HHTYP   unit    ivalue  iflag   unrel   n nwgh ntot totwgh  lastup  lastuser    ));</div><div class="line">    %let otypes=%sysfunc(compbl(    2   1       2   2   2       2       1       2       1       1 1    1    1       2       2           ));</div><div class="line">    %let olenghts=%sysfunc(compbl(  15  8       15  15  15      8       8       8       8       8 8    8    8       8       8           ));</div><div class="line">    %ds_contents(&amp;_dsn, _varlst_=rlabels, _lenlst_=rlengths, _typlst_=rtypes, varnum=yes);</div><div class="line">    %put %quote(&amp;olabels);</div><div class="line">    %put %quote(&amp;rlabels);</div><div class="line">    %put %quote(&amp;olenghts);</div><div class="line">    %put %quote(&amp;rlengths);</div><div class="line">    %put %quote(&amp;otypes);</div><div class="line">    %put %quote(&amp;rtypes);</div><div class="line">    %if %quote(&amp;olabels)=%quote(&amp;rlabels) and %quote(&amp;olenghts)=%quote(&amp;rlengths) and %quote(&amp;otypes)=%quote(&amp;rtypes) %then     </div><div class="line">        %put OK: TEST PASSED - Dataset correctly created with (ordered and typed) fields: %upcase(&amp;olabels);</div><div class="line">    %else                   </div><div class="line">        %put ERROR: TEST FAILED - Wrong dataset creation with fields: &amp;rlabels;</div><div class="line">    %ds_print(INDICATOR_CONTENTS, lib=LIBCFG);</div><div class="line">    %ds_print(&amp;_dsn); /* empty.... */</div><div class="line"></div><div class="line">    %work_clean(&amp;_cds, &amp;_dsn);</div><div class="line">    %exit:</div><div class="line">%mend _example_ds_create;</div></div><!-- fragment --><p>This is the main kind of testing that a developer carries out too while developing his macros. These tests of course should be completely successful when running:</p>
<div class="fragment"><div class="line">%_example_ds_create; </div></div><!-- fragment --><p>The user also benefits from the examplification. Still, this approach will be modernised so as to integrate actual tests (not just checked examples) through the adoption of dedicated unit testing.</p>
<p>A list of simple/static test datasets are available on the [test]{#test} page.</p>
<h4>Black box testing</h4>
<p><b>Testing with unknown data and unknown results, check for plausible results.</b></p>
<p>Black box testing should carried out by trying all input options one at a time, while all the time normal output should be produced. This does not necessarily include all possible combinations of input options under all possible circumstances. It may be virtually impossible to check all possible variations in the functionality of a complex macro. During development new features have been added one by one and tested in their target environment mainly, while testing them in other situations might be either redundant or not applicable. So is validation, though during the validation process it may be difficult to judge sufficiently reliably in which situations additional checking is superfluous. Thus during validation checking actually should be performed at least as or even more extensively than during development.</p>
<p>Use Public User Files.</p>
<h3>Run tests and examples</h3>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">index</a></li>
    <li class="footer">Generated on Fri Jan 12 2018 09:15:53 for PING by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
